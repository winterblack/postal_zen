!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(n,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(n)),e(t),t}:e(jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{}),e.FE.URLRegEx=/(\s|^|>)((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+(\.[a-zA-Z]{2,3})?(:\d*)?(\/[^\s<]*)?)(\s|$|<)/gi,e.FE.PLUGINS.url=function(n){function t(e){for(;e.parentNode;)if(e=e.parentNode,["A","BUTTON","TEXTAREA"].indexOf(e.tagName)>=0)return!0;return!1}function o(){for(var o=n.doc.createTreeWalker(n.el,NodeFilter.SHOW_TEXT,n.node.filter(function(n){return e.FE.URLRegEx.test(n.textContent.replace(/&nbsp;/gi,""))&&!t(n)}),!1);o.nextNode();){var r=o.currentNode,a=null;n.opts.linkAlwaysNoFollow&&(a="nofollow"),n.opts.linkAlwaysBlank&&(a?a+=" noopener noreferrer":a="noopener noreferrer"),e(r).before(r.textContent.replace(e.FE.URLRegEx,"$1<a"+(n.opts.linkAlwaysBlank?' target="_blank"':"")+(a?' rel="'+a+'"':"")+' href="$2">$2</a>$7')),r.parentNode.removeChild(r)}}function r(){n.events.on("paste.afterCleanup",function(t){if(e.FE.URLRegEx.test(t))return t.replace(e.FE.URLRegEx,"$1<a"+(n.opts.linkAlwaysBlank?' target="_blank"':"")+(n.opts.linkAlwaysNoFollow?' rel="nofollow"':"")+' href="$2">$2</a>$7')}),n.events.on("keyup",function(t){var r=t.which;r!=e.FE.KEYCODE.ENTER&&r!=e.FE.KEYCODE.SPACE||o(n.node.contents(n.el))}),n.events.on("keydown",function(t){var o=t.which;if(o==e.FE.KEYCODE.ENTER){var r=n.selection.element();if(("A"==r.tagName||e(r).parents("a").length)&&n.selection.info(r).atEnd)return t.stopImmediatePropagation(),"A"!==r.tagName&&(r=e(r).parents("a")[0]),e(r).after("&nbsp;"+e.FE.MARKERS),n.selection.restore(),!1}})}return{_init:r}}});